function t_throttle(fn,threshhold,scope){var last;var deferTimer;threshhold||(threshhold=250);return function(){var context=scope||this;var now=+new Date();var args=arguments;if(last&&now<last+threshhold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},threshhold)}else{last=now;fn.apply(context,args)}}}
function t607_init(recid){t_onFuncLoad('t_menu__getSectionByHref',function(){t607_checkAnchorLinks(recid);window.addEventListener('orientationchange',function(){setTimeout(function(){t607_checkAnchorLinks(recid)},500)})})}
function t607_checkAnchorLinks(recid){var rec=document.getElementById('rec'+recid);if(!rec||window.innerWidth<980&&rec.getAttribute('data-menu-inited'))return;rec.setAttribute('data-menu-inited','y');var navLinks=rec.querySelectorAll('.t607__list_item a[href*=\'#\']');navLinks=Array.prototype.filter.call(navLinks,function(navLink){return!navLink.classList.contains('tooltipstered')});if(navLinks.length){t607_catchScroll(navLinks)}}
function t607_initKeydownEvent(navLinks,sections){document.addEventListener('keydown',function(e){var direction='';if(e.which===38||e.which===33)direction='top';if(e.which===40||e.which===34)direction='bottom';var activeLink=navLinks.filter(function(el){return el.classList.contains('t-active')});activeLink=activeLink.length?activeLink[0]:null;var activeSection=t_menu__getSectionByHref(activeLink);var activeSectionID=activeSection?activeSection.id:'';var sectionIndexList=sections.map(function(section,i){if(direction==='top'&&section.id===activeSectionID)return i+1;if(direction==='bottom'&&section.id===activeSectionID)return i-1});sectionIndexList=sectionIndexList.filter(function(item){return typeof item==='number'});var newActiveSection=sections[sectionIndexList[0]];if(!newActiveSection)return;var menu=document.querySelector('.t607');var topOffset=menu?menu.getAttribute('data-offset-top')||'0':'0';var sectionTopOffset=newActiveSection.getAttribute('data-offset-top');topOffset=parseInt(topOffset,10);sectionTopOffset=parseInt(sectionTopOffset,10);var topPos=sectionTopOffset-topOffset;t607_scrollToEl(topPos)})}
function t607_catchScroll(navLinks){navLinks=Array.prototype.slice.call(navLinks);var clickedSectionID=null;var sections=[];var sectionToNavigationLinkID={};var interval=100;var lastCall;var timeoutID;navLinks=navLinks.reverse();navLinks.forEach(function(link){var currentSection=t_menu__getSectionByHref(link);if(currentSection&&currentSection.id){sections.push(currentSection);sectionToNavigationLinkID[currentSection.id]=link}});t_menu__updateSectionsOffsets(sections);sections.sort(function(a,b){var firstTopOffset=parseInt(a.getAttribute('data-offset-top'),10)||0;var secondTopOffset=parseInt(b.getAttribute('data-offset-top'),10)||0;return secondTopOffset-firstTopOffset});window.addEventListener('resize',t_throttle(function(){t_menu__updateSectionsOffsets(sections)}));var menuEls=document.querySelectorAll('.t607');Array.prototype.forEach.call(menuEls,function(menu){menu.addEventListener('displayChanged',function(){t_menu__updateSectionsOffsets(sections)})});setInterval(function(){t_menu__updateSectionsOffsets(sections)},5000);t_menu__highlightNavLinks(navLinks,sections,sectionToNavigationLinkID,clickedSectionID);t607_initKeydownEvent(navLinks,sections);navLinks.forEach(function(navLink,i){navLink.addEventListener('click',function(e){var clickedSection=t_menu__getSectionByHref(navLink);if(clickedSection&&!navLink.classList.contains('tooltipstered')){if(clickedSection.id){navLinks.forEach(function(link,index){if(index===i){link.classList.add('t-active');if(!document.querySelector('.t270')){e.preventDefault();var menu=document.querySelector('.t607');var topOffset=menu?menu.getAttribute('data-offset-top')||'0':'0';var sectionTopOffset=clickedSection.getAttribute('data-offset-top');topOffset=parseInt(topOffset,10);sectionTopOffset=parseInt(sectionTopOffset,10);var topPos=sectionTopOffset-topOffset;t607_scrollToEl(topPos)}}else{link.classList.remove('t-active')}});clickedSectionID=clickedSection.id}}})});window.addEventListener('scroll',function(){var dateNow=new Date().getTime();if(lastCall&&dateNow<lastCall+interval){clearTimeout(timeoutID);timeoutID=setTimeout(function(){lastCall=dateNow;clickedSectionID=t_menu__highlightNavLinks(navLinks,sections,sectionToNavigationLinkID,clickedSectionID)},interval-(dateNow-lastCall))}else{lastCall=dateNow;clickedSectionID=t_menu__highlightNavLinks(navLinks,sections,sectionToNavigationLinkID,clickedSectionID)}})}
function t607_scrollToEl(elTopPos){if(elTopPos===window.pageYOffset)return!1;var scrollHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);var maxTopPosViewport=scrollHeight-window.innerHeight;if(elTopPos<0)elTopPos=0;if(elTopPos>maxTopPosViewport)elTopPos=maxTopPosViewport;var stepDivider=20;var duration=400/stepDivider;var difference=window.pageYOffset;var step=Math.abs(window.pageYOffset-elTopPos)/duration;var direction=window.pageYOffset>elTopPos?'top':'bottom';var timerID=setInterval(function(){if(direction==='top'){difference-=step}else{difference+=step}
window.scrollTo(0,difference);document.body.setAttribute('data-scrollable','true');if(direction==='top'&&difference<=elTopPos||direction==='bottom'&&difference>=elTopPos){document.body.removeAttribute('data-scrollable');window.scrollTo(0,elTopPos);clearInterval(timerID)}},stepDivider)}
function t389_scrollToTop(){var duration=700;var difference=window.pageYOffset;var step=10*difference/duration;var timer=setInterval(function(){difference-=step;window.scrollTo(0,difference);document.body.setAttribute('data-scrollable','true');if(window.pageYOffset===0){document.body.removeAttribute('data-scrollable');clearInterval(timer)}},10)}